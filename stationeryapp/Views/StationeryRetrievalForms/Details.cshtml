@model List<stationeryapp.Models.ConsolidatedRequest>

@{
    ViewBag.Title = "Details";
}

<h2>Stationery Retrieval Form</h2>

<table>
    <tr>
        <td>From:</td>
        <td>@ViewData["FromDate"]</td>
    </tr>

    <tr>
        <td>To:</td>
        <td>@ViewData["ToDate"]</td>
    </tr>
</table>

<table class="table" align="center">

    <tr>
        <th rowspan="2">Bin Number</th>
        <th rowspan="2">Stationary Description</th>
        <th colspan="2">Total Quantity</th>
        <th colspan="3">Breakdown by Department</th>
    </tr>

    <tr>
        <th>Needed</th>
        <th>Retrieved</th>
        <th>Department Name</th>
        <th>Needed</th>
        <th>Actual</th>
    </tr>

    @for (int i = 0; i < Model.Count; i++)
    {
        <tr>
            <td>@Model[i].binNumber</td>
            <td>@Model[i].description</td>
            <td>@Model[i].totalNeeded</td>
            <td>@Model[i].totalRetrieved</td>
            @{
                for (int j = 0; j < Model[i].requests.Count; j++)
                {
                    if (j == 0)
                    {
                        <td>@Model[i].requests[j].departmentCode</td>
                        <td>@Model[i].requests[j].needed</td>
                        <td>@Model[i].requests[j].actual</td>
                    }
                    else
                    {

                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>@Model[i].requests[j].departmentCode</td>
                        <td>@Model[i].requests[j].needed</td>
                        <td>@Model[i].requests[j].actual</td>
                    </tr>
                    }
                }
            }
        </tr>
     }

</table>